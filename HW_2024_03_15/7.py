# Написать программу, которая объединяет словари без потери значений.

# Эта задача довольно распространена в некоторых сценариях обработки данных.

# Программа работает со списком словарей.
#     Воспользуйтесь списком словарей из приложенного к заданию файла # ref 7.py

# Программа формирует объединённый словарь по следующим правилам:
#     - все ключи из всех исходных словарей должны быть включены в результирующий словарь
#     - значениями в результирующем словаре становятся множества
#     - значения, соответствующие одним и тем же ключам в исходных словарях, добавляются в одно множество, соответствующее такому же ключу в результирующем словаре

# Программа выводит в stdout пары ключ: значение результирующего словаря по одной паре на строке.

# Пример вывода:
#     Барнаул: {7}
#     Владивосток: {9}
#     Волгоград: {9}
#     Ижевск: {1, 5}
#     Махачкала: {7}
#     Москва: {9, 3}
#     Омск: {9}
#     Саратов: {3, 4}
#     Ульяновск: {3}
#     Казань: {8}
#     Краснодар: {2}
#     Самара: {3}
#     Санкт-Петербург: {1, 6}
#     Тюмень: {1, 4}
#     Уфа: {7}
#     Иркутск: {3}
#     Кемерово: {1}
#     Хабаровск: {6}
#     Оренбург: {3}
#     Ярославль: {3}


list_of_dicts = [
    {
        'Барнаул': 7,
        'Владивосток': 9,
        'Волгоград': 9,
        'Ижевск': 5,
        'Махачкала': 7,
        'Москва': 9,
        'Омск': 9,
        'Саратов': 4,
        'Ульяновск': 3
    },
    {
        'Казань': 8,
        'Краснодар': 2,
        'Москва': 3,
        'Самара': 3,
        'Санкт-Петербург': 6,
        'Тюмень': 1,
        'Уфа': 7
    },
    {
        'Ижевск': 1,
        'Иркутск': 3,
        'Кемерово': 1,
        'Москва': 3,
        'Саратов': 3,
        'Хабаровск': 6
    },
    {
        'Барнаул': 7,
        'Оренбург': 3,
        'Санкт-Петербург': 1,
        'Тюмень': 4,
        'Ярославль': 3
    }
]

from collections import defaultdict

# Создаем результирующий словарь с пустыми множествами в качестве значений по умолчанию
result_dict = defaultdict(set)

# Обходим каждый словарь из списка
for d in list_of_dicts:
    # Обходим каждую пару ключ-значение в словаре
    for key, value in d.items():
        # Добавляем значение в множество для данного ключа
        result_dict[key].add(value)

# Выводим результат
for key, value in result_dict.items():
    print(f'{key}: {value}')

# Вывод:
# Барнаул: {7}
# Владивосток: {9}
# Волгоград: {9}
# Ижевск: {1, 5}
# Махачкала: {7}
# Москва: {9, 3}
# Омск: {9}
# Саратов: {3, 4}
# Ульяновск: {3}
# Казань: {8}
# Краснодар: {2}
# Самара: {3}
# Санкт-Петербург: {1, 6}
# Тюмень: {1, 4}
# Уфа: {7}
# Иркутск: {3}
# Кемерово: {1}
# Хабаровск: {6}
# Оренбург: {3}
# Ярославль: {3}

